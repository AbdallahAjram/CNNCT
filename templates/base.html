{% load static %}
{% load django_htmx %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Django Template" />
  <title>Cnnct</title>

  <script>
    (function () {
      var WANT = "localhost:8000";
      if (location.host !== WANT) {
        location.href = location.protocol + "//" + WANT + location.pathname + location.search + location.hash;
      }
    })();
  </script>

  <link rel="icon" type="image/png" href="/media/avatars/cnnct-high-resolution-logo__1_-removebg-preview.png">
  <link rel="alternate icon" type="image/x-icon" href="{% static 'favicon.ico' %}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@500;700&display=swap" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            indigo: { 600: '#6366f1', 700: '#4f46e5', 950: '#1e1b4b' },
            fuchsia: { 600: '#c026d3' },
            slate: { 900: '#0b1220' }
          }
        }
      }
    }
  </script>

  <script src="https://unpkg.com/hyperscript.org@0.9.14"></script>
  <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.6/dist/htmx.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/htmx-ext-ws@2.0.2/ws.js"></script>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>

  <!-- Firebase config (DO NOT change authDomain) -->
  <script>
    // IMPORTANT:
    // - authDomain MUST be <project>.firebaseapp.com (NOT localhost)
    // - Make sure this exact project is enabled under Firebase > Authentication > Sign-in method > Google.
    const firebaseConfig = {
      apiKey: "AIzaSyDUYUdOG00T87X5AuMfLMzBXwznZjhIFlA",
      authDomain: "cnnct-c91f5.firebaseapp.com",
      projectId: "cnnct-c91f5",
      storageBucket: "cnnct-c91f5.firebasestorage.app",
      messagingSenderId: "840694397310",
      appId: "1:840694397310:web:259dee0900cf2827075b2f",
      measurementId: "G-QCCGCYFC1M"
    };
    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
      console.log("ðŸ”¥ Firebase initialized");
    }
  </script>

  <style>
    [x-cloak]{display:none!important}
    h1{font-size:2.25rem;font-weight:bold;margin-bottom:1rem}
    h2{font-size:1.25rem;font-weight:bold;margin-bottom:.5rem}
    h3{font-size:1.125rem;font-weight:bold}
    p{margin-bottom:1rem}
    .button,button,[type='submit'],[type='button']{
      background:linear-gradient(90deg,#4f46e5 0%,#7c3aed 100%);
      color:#fff;font-weight:bold;border-radius:.5rem;
      box-shadow:0 4px 6px rgba(0,0,0,.1);
      transition:all .2s ease;cursor:pointer;
      padding:1rem 1.5rem;display:inline-block;text-align:center
    }
    .button:hover,button:hover,[type='submit']:hover,[type='button']:hover{filter:brightness(1.08)}
    .button:active,button:active,[type='submit']:active,[type='button']:active{transform:scale(.95)}
    .errorlist li{padding:.25rem .5rem;padding-left:1rem;border-left:4px solid #ef4444;margin-bottom:.5rem;color:#ef4444}
  </style>
</head>
<body hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}' class="bg-gray-950 text-gray-100 min-h-screen {% block class %}{% endblock %}">
  {% include 'includes/messages.html' %}
  {% include 'includes/header.html' %}
  <div style="height:56px"></div>

  {% if user.is_authenticated %}
  <div
    id="presence-ping"
    hx-get="{% url 'presence-ping' %}"
    hx-trigger="load, every 45s"
    hx-swap="none">
  </div>
  {% endif %}

  {% block layout %}{% endblock %}
  {% block javascript %}{% endblock %}
</body>
</html>
